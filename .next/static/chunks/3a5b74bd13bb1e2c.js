(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34299,(e,t,a)=>{let n=document.getElementById("searchInput"),i=n.closest(".search-wrap"),o=document.getElementById("statusMessage"),r=document.getElementById("viewTitle"),s=document.getElementById("storeFilterRow"),l=document.getElementById("topSearchToggle"),d=document.getElementById("topNotificationsBtn"),c=document.getElementById("topNotificationsBadge"),u=document.getElementById("topUpdateBtn"),m=document.getElementById("topAccountBtn"),p=document.getElementById("accountMenu"),g=document.getElementById("accountMenuName"),f=document.getElementById("accountMenuEmail"),y=document.getElementById("notificationsPanel"),h=document.getElementById("notificationsList"),w=document.getElementById("notificationsEmpty"),b=document.getElementById("notificationsClearBtn"),v=document.getElementById("windowMinBtn"),B=document.getElementById("windowMaxBtn"),$=document.getElementById("windowCloseBtn"),I=document.getElementById("sideHomeBtn"),L=document.getElementById("sideHomeLogo"),S=document.getElementById("navStoreBtn"),A=document.getElementById("navLibraryBtn"),E=document.getElementById("railGamesList"),k=document.getElementById("railDownloadsBtn"),x=document.getElementById("railDownloadsCount"),C=document.getElementById("storeView"),M=document.getElementById("detailsView"),N=document.getElementById("libraryView"),P=document.getElementById("downloadsView"),G=document.getElementById("storeGrid"),D=document.getElementById("libraryGrid"),z=document.getElementById("downloadsActiveSection"),F=document.getElementById("downloadsActiveCount"),R=document.getElementById("downloadsActiveList"),T=document.getElementById("downloadsEmptyState"),O=document.getElementById("downloadsActiveCollapseBtn"),U=document.getElementById("downloadsInstallOptionsBtn"),j=document.getElementById("downloadsPauseAllBtn"),H=document.getElementById("downloadsResumeAllBtn"),V=document.getElementById("detailsBackBtn"),q=document.getElementById("detailsBreadcrumb"),_=document.getElementById("detailsHeroBackdrop"),J=document.getElementById("detailsLogo"),W=document.getElementById("detailsTitle"),K=document.getElementById("detailsDescription"),Z=document.getElementById("detailsLongDescription"),Y=document.getElementById("detailsAddLibraryBtn"),Q=document.getElementById("detailsActionBtn"),X=document.getElementById("detailsProgress"),ee=document.getElementById("detailsProgressFill"),et=document.getElementById("detailsProgressText"),ea=document.getElementById("detailsStatPlayTime"),en=document.getElementById("detailsStatAchievement"),ei=document.getElementById("detailsVideoWrap"),eo=document.getElementById("detailsGallery"),er=document.getElementById("detailsDevelopedBy"),es=document.getElementById("detailsPublishedBy"),el=document.getElementById("detailsReleaseDate"),ed=document.getElementById("detailsGenres"),ec=document.getElementById("detailsStatus"),eu=document.getElementById("detailsPlayBtn"),em=document.getElementById("detailsUninstallBtn"),ep=document.getElementById("installPathModal"),eg=document.getElementById("installPathCurrent"),ef=document.getElementById("installPathKeepBtn"),ey=document.getElementById("installPathChangeBtn"),eh=document.getElementById("installPathCancelBtn"),ew=document.getElementById("updateRestartModal"),eb=document.getElementById("updateRestartText"),ev=document.getElementById("updateRestartNowBtn"),eB=document.getElementById("updateRestartLaterBtn"),e$=document.getElementById("authGate"),eI=document.getElementById("authGateStatus"),eL=document.getElementById("authSteamLoginBtn"),eS=document.getElementById("authRetryBtn"),eA="wyzer.launcher.library.v1",eE={play:"",close:"",install:""},ek=new Intl.DateTimeFormat("pt-BR",{hour:"2-digit",minute:"2-digit"}),ex=new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit"}),eC=window.Motion||null,eM=eC&&"function"==typeof eC.animate?eC.animate:null,eN=eC&&"function"==typeof eC.stagger?eC.stagger:null,eP="function"==typeof window.confetti?window.confetti:null,eG="function"==typeof window.Notyf?new window.Notyf({duration:4200,dismissible:!0,ripple:!1,position:{x:"right",y:"bottom"},types:[{type:"success",background:"rgba(26, 26, 32, 0.98)",icon:!1,className:"notyf-theme-success"},{type:"error",background:"rgba(29, 26, 31, 0.98)",icon:!1,className:"notyf-theme-error"},{type:"info",background:"rgba(26, 26, 32, 0.98)",icon:!1,className:"notyf-theme-info"}]}):null,eD={games:[],search:"",searchOpen:!1,selectedGameId:"",selectedGalleryByGameId:new Map,installRootPath:"",installProgressByGameId:new Map,uninstallingGameIds:new Set,libraryGameIds:new Set,openLibraryMenuGameId:"",unreadNotifications:0,notificationHistory:[],notificationsOpen:!1,accountMenuOpen:!1,downloadSpeedByGameId:new Map,downloadsSectionCollapsed:!1,recentCompletedDownloadsByGameId:new Map,authChecking:!1,authBusy:!1,authConfigured:!0,authSession:null,autoUpdate:{supported:!1,configured:!1,enabled:!1,status:"disabled",message:"",currentVersion:"",latestVersion:"",updateDownloaded:!1,progressPercent:0,bytesPerSecond:0,transferredBytes:0,totalBytes:0,lastCheckedAt:"",error:""},updateRestartModalOpen:!1,lastAutoUpdateNotifiedVersion:"",appBootstrapped:!1,view:"store",lastNonDetailView:"store",storeFilter:"popular",introPlayed:!1,realtimeSyncStarted:!1,autoUpdateRealtimeSyncStarted:!1},ez=null,eF=null,eR=null,eT=null,eO=null,eU=0,ej=0,eH="",eV="",eq=null;function e_(e,t=!1){o.textContent=e,o.classList.toggle("status-error",t)}function eJ(e){return e&&"object"==typeof e?String(e?.user?.displayName||e?.user?.email||"").trim():""}function eW(e){if(!e$)return;let t=!!e;e$.classList.toggle("is-hidden",!t),document.body.classList.toggle("auth-locked",t),t&&eQ(!1)}function eK(e,t=!1){eI&&(eI.textContent=e||"",eI.classList.toggle("is-error",!!t))}function eZ(){if(!m)return;let e=eD.authSession,t=!!e?.user?.id;if(eY(),m.classList.toggle("is-authenticated",t),!t){eQ(!1),m.setAttribute("aria-label","Entrar com Steam"),m.title="Conta",m.innerHTML=`
      <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <circle cx="12" cy="8.6" r="3.3" stroke="currentColor" stroke-width="1.7"></circle>
        <path d="M6.7 18.2C7.5 15.9 9.5 14.8 12 14.8C14.5 14.8 16.5 15.9 17.3 18.2" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"></path>
      </svg>
    `;return}let a=eJ(e)||"Conta",n=e&&"object"==typeof e?String(e?.user?.avatarUrl||"").trim():"";if(m.setAttribute("aria-label",`Conta de ${a}`),m.title=a,n){m.innerHTML=`<img class="top-user-avatar" src="${tb(n)}" alt="${tb(a)}" loading="lazy" />`;return}let i=a.split(/\s+/).filter(Boolean).slice(0,2).map(e=>e[0]?.toUpperCase()||"").join("")||"U";m.innerHTML=`<span class="top-user-initials">${tb(i)}</span>`}function eY(){if(!g||!f)return;let e=eD.authSession,t=eJ(e)||"Conta",a=(e&&"object"==typeof e?String(e?.user?.email||e?.user?.id||"").trim():"")||"Sem login";g.textContent=t,f.textContent=a}function eQ(e){if(!p||!m)return;let t=!!e&&!!eD.authSession?.user?.id;eD.accountMenuOpen=t,p.classList.toggle("is-hidden",!t),m.classList.toggle("is-active",t),m.setAttribute("aria-expanded",t?"true":"false")}function eX(e){let t=!!e;eL&&(eL.disabled=t,eL.textContent=t?"Abrindo Steam...":"Continuar com Steam"),eS&&(eS.disabled=t)}async function e1(){eD.appBootstrapped?await ag():(eD.appBootstrapped=!0,eD.libraryGameIds=function(){try{let e=window.localStorage.getItem(eA),t=JSON.parse(e||"[]");if(!Array.isArray(t))return new Set;return new Set(t.filter(e=>"string"==typeof e&&e.trim()))}catch(e){return new Set}}(),await Promise.all([af(),ag()]),t1(),e9(),tn(),eM&&!eD.introPlayed&&(eD.introPlayed=!0,eM(".side-rail",{opacity:[0,1],x:[-20,0]},{duration:.46,easing:[.22,1,.36,1]}),eM(".top-header",{opacity:[0,1],y:[-10,0]},{duration:.38,delay:.03,easing:[.22,1,.36,1]}),eM(".stage-header",{opacity:[0,1],y:[15,0]},{duration:.4,delay:.08,easing:[.22,1,.36,1]})),function(){if(eD.realtimeSyncStarted)return;eD.realtimeSyncStarted=!0;let e=async()=>{try{await ag()}catch(e){}};window.setInterval(()=>{e()},5e3),window.addEventListener("focus",()=>{e()}),document.addEventListener("visibilitychange",()=>{document.hidden||e()})}(),e_(`${eD.games.length} jogo(s) carregado(s).`))}async function e0(){if(!eD.authChecking){eD.authChecking=!0,eW(!0),eK("Validando sessao..."),eX(!0);try{if("function"!=typeof window.launcherApi.authGetSession)throw Error("API de autenticacao indisponivel. Atualize o launcher.");let e=await window.launcherApi.authGetSession(),t=!!(e?.authenticated&&e?.session?.user?.id);if(eD.authConfigured=!!e?.configured,eD.authSession=t?e.session:null,eZ(),!eD.authConfigured){eW(!0),eK("Steam nao configurado. Preencha steamWebApiKey em config/auth.json antes de entrar.",!0),eS&&eS.classList.remove("is-hidden"),e_("Configure Steam Web API Key para liberar login com Steam.",!0);return}if(!t){eW(!0),eK("Entre com Steam para continuar."),eS&&eS.classList.add("is-hidden"),e_("Login necessario. Use Continuar com Steam.");return}eW(!1),await e1()}catch(e){eD.authSession=null,eZ(),eW(!0),eK(e?.message||"Falha ao verificar login com Steam.",!0),eS&&eS.classList.remove("is-hidden"),e_(`Falha de autenticacao: ${e?.message||"erro desconhecido"}`,!0)}finally{eD.authChecking=!1,eX(!1)}}}async function e2(){if(!eD.authBusy){if("function"!=typeof window.launcherApi.authLoginSteam)return void eK("API de login indisponivel nesta versao.",!0);eD.authBusy=!0,eK("Abrindo Steam para autenticacao..."),eX(!0);try{let e=await window.launcherApi.authLoginSteam();if(!(e?.authenticated&&e?.session?.user?.id))throw Error("Nao foi possivel concluir login Steam.");eD.authSession=e.session,eZ(),eW(!1),to("success","Login concluido",`Bem-vindo, ${eJ(e.session)||"jogador"}!`),await e1()}catch(e){eD.authSession=null,eZ(),eW(!0),eK(e?.message||"Falha ao autenticar com Steam.",!0),eS&&eS.classList.remove("is-hidden"),e_(`Erro de login: ${e?.message||"erro desconhecido"}`,!0),to("error","Login falhou",e?.message||"Nao foi possivel autenticar com Steam.")}finally{eD.authBusy=!1,eX(!1)}}}async function e4(){if(!eD.authBusy&&window.confirm("Deseja sair da sua conta Steam no launcher?")){eD.authBusy=!0;try{"function"==typeof window.launcherApi.authLogout&&await window.launcherApi.authLogout(),eD.authSession=null,eZ(),eW(!0),eK("Sessao encerrada. Entre com Steam para continuar."),e_("Logout realizado."),to("info","Sessao encerrada","Voce saiu da conta Steam.")}catch(e){e_(`Falha ao sair: ${e?.message||"erro desconhecido"}`,!0),to("error","Erro ao sair",e?.message||"Nao foi possivel encerrar sessao.")}finally{eD.authBusy=!1,eX(!1)}}}async function e8(e){let t=String(e||"").trim().toLowerCase();if(t){if("store"===t){t2("store"),eD.searchOpen=!1,t1(),au(),e_("Abrindo Store...");return}if("library"===t){t2("library"),eD.searchOpen=!1,t1(),au(),e_("Abrindo Library...");return}if("folder"===t){if("function"!=typeof window.launcherApi.openDownloadsFolder)throw Error("Atalho da pasta local indisponivel.");await window.launcherApi.openDownloadsFolder(),e_("Abrindo pasta local dos jogos..."),to("info","Pasta local","Diretorio de instalacao aberto no Explorer.");return}"logout"===t&&await e4()}}async function e6(e){let t,a=String(e||"").trim();if(!a)return!1;try{t=new URL(a)}catch(e){throw Error("URL externa invalida.")}if(!["http:","https:"].includes(t.protocol))throw Error("Protocolo de URL nao suportado.");return"function"==typeof window.launcherApi.openExternalUrl?!!await window.launcherApi.openExternalUrl(t.toString()):(window.open(t.toString(),"_blank","noopener,noreferrer"),!0)}function e9(){c&&c.classList.toggle("is-hidden",eD.unreadNotifications<=0)}function e3(){eD.unreadNotifications=0,e9()}function e5(){let e=document.querySelector(".notyf");if(!e)return;let t=Array.from(e.querySelectorAll(".notyf__toast"));t.length?(e.classList.add("has-toasts"),t.forEach(e=>{e.classList.remove("notyf-stack-top","notyf-stack-hidden"),e.style.removeProperty("--stack-index"),e.style.removeProperty("--stack-z"),e.style.removeProperty("--stack-shift-y"),e.style.removeProperty("--stack-scale"),e.style.removeProperty("--stack-opacity"),e.style.removeProperty("--stack-brightness")}),[...t].reverse().forEach((e,t)=>{let a=Math.max(.86,1-.032*t),n=Math.max(.24,1-.17*t),i=Math.max(.78,1-.06*t);e.style.setProperty("--stack-index",String(t)),e.style.setProperty("--stack-z",String(420-t)),e.style.setProperty("--stack-shift-y",`${18*t}px`),e.style.setProperty("--stack-scale",a.toFixed(3)),e.style.setProperty("--stack-opacity",n.toFixed(3)),e.style.setProperty("--stack-brightness",i.toFixed(3)),0===t&&e.classList.add("notyf-stack-top"),t>=5&&e.classList.add("notyf-stack-hidden")})):e.classList.remove("has-toasts")}function e7(){if(!eG||"function"!=typeof window.MutationObserver)return;let e=()=>{let e=document.querySelector(".notyf");return!!e&&(eR||(eR=new window.MutationObserver(()=>{window.requestAnimationFrame(()=>{e5()})})).observe(e,{childList:!0}),window.requestAnimationFrame(()=>{e5()}),!0)};if(e()){eT&&(eT.disconnect(),eT=null);return}eT||(eT=new window.MutationObserver(()=>{e()&&eT&&(eT.disconnect(),eT=null)})).observe(document.body,{childList:!0,subtree:!0})}function te(e){let t=!!e;document.body.classList.toggle("window-maximized",t),B&&(B.classList.toggle("is-maximized",t),B.setAttribute("aria-label",t?"Restaurar":"Maximizar"))}function tt(e){return"error"===e?"error":"success"===e?"success":"info"}function ta(e,t="notification-icon-svg"){return"error"===e?`
      <svg class="${t}" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <circle cx="12" cy="12" r="8.2" stroke="currentColor" stroke-width="1.85"></circle>
        <path d="M12 7.9V12.4" stroke="currentColor" stroke-width="1.9" stroke-linecap="round"></path>
        <circle cx="12" cy="15.9" r="1.1" fill="currentColor"></circle>
      </svg>
    `:"success"===e?`
      <svg class="${t}" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <circle cx="12" cy="12" r="8.2" stroke="currentColor" stroke-width="1.85"></circle>
        <path d="M8.5 12.3L10.8 14.6L15.6 9.8" stroke="currentColor" stroke-width="1.95" stroke-linecap="round" stroke-linejoin="round"></path>
      </svg>
    `:`
    <svg class="${t}" viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <circle cx="12" cy="12" r="8.2" stroke="currentColor" stroke-width="1.85"></circle>
      <path d="M12 9.4V12.8" stroke="currentColor" stroke-width="1.9" stroke-linecap="round"></path>
      <circle cx="12" cy="7.6" r="1.1" fill="currentColor"></circle>
      <path d="M9.2 15.7H14.8" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"></path>
    </svg>
  `}function tn(){if(!h||!w)return;let e=eD.notificationHistory||[],t=e.length>0;if(h.classList.toggle("is-hidden",!t),w.classList.toggle("is-hidden",t),!t){h.innerHTML="";return}h.innerHTML=e.map(e=>{let t=tb(e.title||"Notificacao"),a=tb(e.message||""),n=tt(e.type),i="error"===n?"Erro":"success"===n?"Sucesso":"Info",o=function(e){let t=new Date(e);if(Number.isNaN(t.getTime()))return"--:--";let a=new Date;return t.getDate()===a.getDate()&&t.getMonth()===a.getMonth()&&t.getFullYear()===a.getFullYear()?ek.format(t):`${ex.format(t)} ${ek.format(t)}`}(e.createdAt),r=tb(e.id||"");return`
        <article class="notification-item is-${n}" data-notification-id="${r}">
          <span class="notification-icon-wrap" aria-hidden="true">
            ${ta(n)}
          </span>
          <div class="notification-main">
            <div class="notification-item-top">
              <span class="notification-type">${tb(i)}</span>
              <time class="notification-time">${tb(o)}</time>
            </div>
            <strong class="notification-title">${t}</strong>
            ${a?`<p class="notification-message">${a}</p>`:""}
          </div>
          <button
            class="notification-dismiss-btn"
            type="button"
            aria-label="Remover notificacao"
            data-notification-dismiss="${r}"
          >
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M8.2 8.2L15.8 15.8M15.8 8.2L8.2 15.8" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"></path>
            </svg>
          </button>
        </article>
      `}).join("")}function ti(e){y&&d&&(eD.notificationsOpen=!!e,eD.notificationsOpen&&eQ(!1),y.classList.toggle("is-hidden",!eD.notificationsOpen),d.classList.toggle("is-active",eD.notificationsOpen),d.setAttribute("aria-expanded",eD.notificationsOpen?"true":"false"),eD.notificationsOpen&&(e3(),tn()))}function to(e,t,a,n=3600){let i,o,r;i=tt(e),o=String(t||"").trim()||"Notificacao",r=String(a||"").trim(),eD.notificationHistory.unshift({id:`${Date.now()}-${Math.floor(1e6*Math.random())}`,type:i,title:o,message:r,createdAt:Date.now()}),eD.notificationHistory.length>36&&(eD.notificationHistory.length=36),tn(),function(e,t,a,n=3600){let i=tt(e),o=String(t||"").trim(),r=String(a||"").trim(),s=o||"Notificacao",l=r?`${s}: ${r}`:s,d=tb(s),c=tb(r),u=`
    <div class="toast-shell">
      <span class="toast-icon-wrap toast-icon-${i}" aria-hidden="true">
        ${ta(i,"toast-icon-svg")}
      </span>
      <div class="toast-content">
        <strong class="toast-title">${d}</strong>
        ${c?`<p class="toast-description">${c}</p>`:""}
      </div>
    </div>
  `,m=Number.isFinite(Number(n))?Math.max(1200,Number(n)):3600;if(eG&&"function"==typeof eG.open)try{eG.open({type:i,message:u,duration:m,dismissible:!0}),e7(),window.requestAnimationFrame(()=>{e5()});return}catch(e){}e_(l,"error"===i)}(e,t,a,n),eD.notificationsOpen||(eD.unreadNotifications+=1),e9()}function tr(e){let t=String(e||"").trim();return t?t.startsWith("v")?t:`v${t}`:""}function ts(){return"function"==typeof window.launcherApi?.autoUpdateGetState&&"function"==typeof window.launcherApi?.autoUpdateCheck}function tl(e=8e3){ts()&&(eq&&window.clearTimeout(eq),eq=window.setTimeout(()=>{eq=null,tp()},Math.max(1200,Number(e)||8e3)))}function td(e){if(!ew)return;let t=!!e&&!!eD.autoUpdate.updateDownloaded;if(eD.updateRestartModalOpen=t,ew.classList.toggle("is-hidden",!t),ew.setAttribute("aria-hidden",t?"false":"true"),!t||!eb)return;let a=tr(eD.autoUpdate.latestVersion);eb.textContent=a?`A versao ${a} do launcher foi baixada.
Deseja reiniciar agora para aplicar a atualizacao sem reinstalar seus jogos?`:"Uma nova versao do launcher foi baixada. Deseja reiniciar agora para aplicar sem reinstalar jogos?"}function tc(){if(!u)return;let e=eD.autoUpdate,t=ts()||e.supported||e.enabled||e.configured;u.classList.toggle("is-hidden",!t),u.classList.toggle("is-checking","downloading"===e.status||"checking"===e.status||"installing"===e.status),u.classList.toggle("is-ready","downloaded"===e.status||e.updateDownloaded),u.classList.toggle("is-active",eD.updateRestartModalOpen),u.disabled=!1;let a="Atualizacao do launcher";if("downloading"===e.status){let t=Number(e.progressPercent),n=Number.isFinite(t)?Math.max(0,Math.min(100,Math.round(t))):0;a=`Baixando atualizacao (${n}%)`}else"checking"===e.status?a=e.message||"Verificando atualizacoes do launcher...":"downloaded"===e.status||e.updateDownloaded?a="Atualizacao pronta. Clique para reiniciar e instalar.":"installing"===e.status?a=e.message||"Aplicando atualizacao do launcher...":"available"===e.status?a=e.message||"Nova atualizacao encontrada.":"idle"===e.status?a=e.message||"Launcher atualizado. Clique para verificar novamente.":"disabled"===e.status?a=e.error||e.message||"Atualizador desativado ou nao configurado.":"error"===e.status&&(a=e.error||e.message||"Falha no atualizador. Clique para tentar novamente.");u.setAttribute("aria-label",a),u.title=a}function tu(e,t=!1){let a,n=eD.autoUpdate,i={supported:!!(a=e&&"object"==typeof e?e:{}).supported,configured:!!a.configured,enabled:!!a.enabled,status:String(a.status||"disabled").trim().toLowerCase()||"disabled",message:String(a.message||"").trim(),currentVersion:String(a.currentVersion||"").trim(),latestVersion:String(a.latestVersion||"").trim(),updateDownloaded:!!a.updateDownloaded,progressPercent:Number(a.progressPercent)||0,bytesPerSecond:Number(a.bytesPerSecond)||0,transferredBytes:Number(a.transferredBytes)||0,totalBytes:Number(a.totalBytes)||0,lastCheckedAt:String(a.lastCheckedAt||"").trim(),error:String(a.error||"").trim()};eD.autoUpdate=i,tc(),!i.updateDownloaded&&eD.updateRestartModalOpen&&td(!1);let o=tr(i.latestVersion);if("available"!==n.status&&"available"===i.status&&to("info","Atualizacao disponivel",o?`${o} encontrada. Clique no icone de update para baixar.`:"Nova versao encontrada. Clique no icone de update para baixar."),!n.updateDownloaded&&i.updateDownloaded){eD.lastAutoUpdateNotifiedVersion!==o&&(eD.lastAutoUpdateNotifiedVersion=o,to("success","Atualizacao pronta",o?`${o} foi baixada. Clique no icone verde para reiniciar e atualizar.`:"Atualizacao baixada. Clique no icone verde para reiniciar e atualizar."));return}t&&"error"!==n.status&&"error"===i.status&&to("error","Atualizacao",i.error||i.message||"Falha ao verificar atualizacoes.")}async function tm(){if(!ts())return void tc();try{let e=await window.launcherApi.autoUpdateGetState();tu(e,!1)}catch(e){e_(`Falha ao consultar atualizador: ${e?.message||"erro desconhecido"}`,!0),tu({supported:!0,configured:!0,enabled:!0,status:"idle",message:"Atualizador indisponivel no momento. Tentando novamente em segundo plano.",error:""},!1)}"function"==typeof window.launcherApi.onAutoUpdateState&&window.launcherApi.onAutoUpdateState(e=>{tu(e,!0)})}async function tp(){if(ts())try{if("function"==typeof window.launcherApi.autoUpdateCheckBackground){let e=await window.launcherApi.autoUpdateCheckBackground();tu(e,!1);return}let e=await window.launcherApi.autoUpdateCheck();tu(e,!1)}catch(e){}}async function tg(){if(!ts())return void to("error","Atualizacao","API de atualizacao indisponivel nesta versao.");try{let e=await window.launcherApi.autoUpdateCheck();tu(e,!1);let t=String(e?.status||"").toLowerCase();if("idle"===t){let t=String(e?.message||"").trim(),a=/temporari|indisponivel|limit/i.test(t)&&/update|atualiza|github|feed/i.test(t);to("info","Atualizacao",a&&t?t:"Voce ja esta na versao mais recente.");return}if("disabled"===t)return void to("info","Atualizacao",e?.error||e?.message||"Atualizador desativado.");if("downloading"===t||"available"===t)return void to("info","Atualizacao",e?.message||"Nova atualizacao encontrada.");"error"===t&&to("error","Atualizacao",e?.error||e?.message||"Falha ao verificar atualizacoes.")}catch(e){to("error","Atualizacao",e?.message||"Falha ao verificar atualizacoes.")}}async function tf(){if("function"!=typeof window.launcherApi.autoUpdateDownload)return void to("error","Atualizacao","API de download do updater indisponivel.");try{let e=await window.launcherApi.autoUpdateDownload();tu(e,!1);let t=String(e?.status||"").toLowerCase();if("downloading"===t)return void to("info","Atualizacao",e?.message||"Download da atualizacao iniciado.");if("downloaded"===t)return void to("success","Atualizacao pronta","Clique no icone verde para reiniciar e aplicar.");if("error"===t)return void to("error","Atualizacao",e?.error||e?.message||"Falha ao baixar atualizacao.")}catch(e){to("error","Atualizacao",e?.message||"Falha ao baixar atualizacao.")}}async function ty(){if("function"!=typeof window.launcherApi.autoUpdateRestartAndInstall)return void to("error","Atualizacao","API de reinicio para update indisponivel.");try{await window.launcherApi.autoUpdateRestartAndInstall(),e_("Reiniciando launcher para aplicar atualizacao...")}catch(t){let e=t?.message||"Nao foi possivel reiniciar para atualizar.";e_(`Erro de atualizacao: ${e}`,!0),to("error","Atualizacao",e)}}async function th(){eD.autoUpdate.updateDownloaded||"downloaded"===eD.autoUpdate.status?td(!0):"available"===eD.autoUpdate.status?await tf():"downloading"===eD.autoUpdate.status||"checking"===eD.autoUpdate.status||"installing"===eD.autoUpdate.status?to("info","Atualizacao",eD.autoUpdate.message||"Atualizacao em andamento."):await tg()}function tw(e,t){if(!e)return;let a=e.querySelector("[data-btn-label]");if(a){a.textContent=t;return}e.textContent=t}function tb(e){return String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function tv(e){return String(e??"").replace(/\\/g,"\\\\").replace(/'/g,"\\'")}function tB(e){let t=String(e||"");return t?t.length<=32?t:`${t.slice(0,3)}...${t.slice(-25)}`:""}function t$(e,t){for(let a of t){let t=e?.[a];if("number"==typeof t&&Number.isFinite(t))return t;if("string"==typeof t&&t.trim())return t.trim()}return""}function tI(e){let t=Number(e);if(!Number.isFinite(t))return"--";if(0===t)return"0m";if(t<0)return"--";if(t<1){let e=Math.round(60*t);return e>0?`${e}m`:"--"}let a=t>=10?0:1;return`${t.toFixed(a).replace(/\.0$/,"")}h`}function tL(){return eD.installRootPath||"C:\\wyzer_games"}function tS(e="cancel"){ep.classList.add("is-hidden"),ep.setAttribute("aria-hidden","true"),eF&&(eF(e),eF=null)}async function tA(){try{await af()}catch(e){}let e=tL();return eg.textContent=e,eg.title=e,ep.classList.remove("is-hidden"),ep.setAttribute("aria-hidden","false"),new Promise(e=>{eF=e})}function tE(){window.localStorage.setItem(eA,JSON.stringify([...eD.libraryGameIds]))}function tk(e){return eD.libraryGameIds.has(e)}function tx(e){!e||eD.libraryGameIds.has(e)||(eD.libraryGameIds.add(e),tE())}function tC(e){!e||eD.libraryGameIds.has(e)&&(eD.libraryGameIds.delete(e),tE())}function tM(e){return e.cardImageUrl||e.bannerUrl||e.imageUrl||"https://placehold.co/640x360/0f0f0f/f2f2f2?text=Game"}function tN(e){return e.bannerUrl||e.cardImageUrl||e.imageUrl||"https://placehold.co/1280x720/0f0f0f/f2f2f2?text=Game+Banner"}function tP(e){return eD.games.find(t=>t.id===e)}function tG(e){return eD.installProgressByGameId.get(e)}function tD(e){return eD.uninstallingGameIds.has(e)}function tz(e){if(tD(e))return!0;let t=tG(e);return!!t&&!["completed","failed"].includes(t.phase)}function tF(e){if(tD(e.id))return{action:"busy",label:"Removing...",disabled:!0};let t=tG(e.id);if(tz(e.id)){let e="Processing...";if(t?.phase==="downloading")if(Number.isFinite(t.percent)&&Number.isFinite(t.totalBytes)&&t.totalBytes>0){let a=Math.max(0,Math.min(100,Math.round(t.percent)));e=`Baixando ${a}%`}else if(Number.isFinite(t.downloadedBytes)&&t.downloadedBytes>0){let a=(t.downloadedBytes/1024/1024).toFixed(1);e=`Baixando ${a} MB`}else e="Baixando...";return t?.phase==="extracting"&&(e="Extraindo..."),t?.phase==="preparing"&&(e="Preparando..."),{action:"busy",label:e,disabled:!0}}return e.installed?e.running?{action:"close",label:"PARAR JOGO",disabled:!1}:{action:"play",label:"PLAY GAME",disabled:!1}:e.comingSoon?{action:"soon",label:"Coming Soon",disabled:!0}:{action:"install",label:"Download Game",disabled:!1}}function tR(e){return[...new Set([...Array.isArray(e.gallery)?e.gallery:[],tN(e),tM(e)].filter(Boolean).map(e=>String(e).trim()).filter(Boolean))]}function tT(e){let t=String(e||"").trim();if(!t)return null;let a=t.match(/^[a-zA-Z0-9_-]{11}$/);if(a)return{videoId:a[0],list:"",startSeconds:0};let n=/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//i.test(t)?t:`https://${t.replace(/^\/+/,"")}`;try{let e=new URL(n),t=e.hostname.toLowerCase().replace(/^www\./,"").replace(/^m\./,"").replace(/^music\./,""),a=e.pathname.split("/").filter(Boolean),i="";if("youtu.be"===t&&(i=a[0]||""),i||"youtube.com"!==t&&"youtube-nocookie.com"!==t||(i=e.searchParams.get("v")||e.searchParams.get("vi")||""),!i&&("youtube.com"===t||"youtube-nocookie.com"===t)){let e=a.indexOf("embed");e>=0&&a[e+1]&&(i=a[e+1])}if(!i&&("youtube.com"===t||"youtube-nocookie.com"===t)&&["shorts","live","v"].includes(a[0])&&a[1]&&(i=a[1]),!i||!/^[a-zA-Z0-9_-]{11}$/.test(i))return null;let o=String(e.searchParams.get("list")||"").trim(),r=function(e){let t=String(e||"").trim().toLowerCase();if(!t)return 0;if(/^\d+$/.test(t)){let e=Number(t);return Number.isFinite(e)&&e>0?Math.floor(e):0}let a=0,n=[...t.matchAll(/(\d+)\s*(h|m|s)/g)];if(!n.length)return 0;for(let e of n){let t=Number(e?.[1]||0),n=e?.[2]||"";Number.isFinite(t)&&!(t<=0)&&("h"===n&&(a+=3600*t),"m"===n&&(a+=60*t),"s"===n&&(a+=t))}return a>0?Math.floor(a):0}(e.searchParams.get("t")||e.searchParams.get("start"));return{videoId:i,list:o,startSeconds:r}}catch(e){return null}}let tO=new Set(["mp4","webm","ogg","mov","m4v"]);function tU(e){let t=String(e||"");if(!t)return"";try{return decodeURIComponent(t)}catch(e){return t}}function tj(e){let t=String(e||"");if(!t)return"";for(let e of[t,tU(t)]){let t=e.match(/\.([a-z0-9]{3,4})(?=$|[^a-z0-9])/i),a=String(t?.[1]||"").toLowerCase();if(tO.has(a))return a}return""}function tH(e){let t=String(e||"").toLowerCase();return"mp4"===t?"video/mp4":"webm"===t?"video/webm":"ogg"===t?"video/ogg":"mov"===t?"video/quicktime":"m4v"===t?"video/x-m4v":""}function tV(e){return!!e&&"object"==typeof e&&!!String(e.trailerUrl||e.videoUrl||"").trim()}function tq(e,t){if(!ei)return;let a=String(e||"");ei.dataset.mediaKey!==a&&(ei.dataset.mediaKey=a,ei.innerHTML=t)}function t_(e){return String(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]+/g," ").trim().replace(/\s+/g," ")}function tJ(e){return String(e||"").replace(/(.)\1+/g,"$1")}function tW(e){return String(e||"").replace(/\s+/g,"")}function tK(e,t){let a=String(e||""),n=String(t||"");if(!a||!n||a.length>n.length)return!1;let i=0;for(let e=0;e<n.length&&i<a.length;e+=1)n[e]===a[i]&&(i+=1);return i===a.length}function tZ(e,t,a){let n=String(e||""),i=String(t||""),o=Number(a);if(!n||!i||!Number.isFinite(o)||o<0)return!1;let r=n.length,s=i.length;if(Math.abs(r-s)>o)return!1;let l=Array.from({length:s+1},(e,t)=>t),d=Array(s+1);for(let e=1;e<=r;e+=1){d[0]=e;let t=d[0];for(let a=1;a<=s;a+=1){let o=+(n[e-1]!==i[a-1]),r=Math.min(l[a]+1,d[a-1]+1,l[a-1]+o);d[a]=r,r<t&&(t=r)}if(t>o)return!1;[l,d]=[d,l]}return l[s]<=o}function tY(e,t){let a,n=t_(e);if(!n)return!0;let i=tW(n),o=tJ(i),r=o||i;if(n.length>=2&&t.normalizedText.includes(n)||i.length>=2&&t.compactText.includes(i)||o.length>=2&&t.compactCollapsed.includes(o)||i.length>=2&&tK(i,t.compactText)||o.length>=2&&tK(o,t.compactCollapsed))return!0;if(r.length<3)return!1;let s=(a=Number(r.length)||0)<=4?1:a<=8?2:3;for(let e of t.tokens)if(!(Math.abs(e.length-r.length)>s)&&tZ(r,e,s))return!0;for(let e of t.collapsedTokens)if(!(Math.abs(e.length-r.length)>s)&&tZ(r,e,s))return!0;return!1}function tQ(e){let t=eD.search.trim();return t?e.filter(e=>(function(e,t){let a,n,i,o,r,s=t_(t);if(!s)return!0;let l=(i=tJ(n=tW(a=[e.id,e.name,e.description,e.longDescription,e.section,e.developedBy,e.publishedBy,e.releaseDate,...Array.isArray(e.genres)?e.genres:[]].map(e=>t_(e)).filter(Boolean).join(" "))),r=[...new Set((o=[...new Set(a.split(" ").filter(Boolean))]).map(e=>tJ(e)).filter(Boolean))],{normalizedText:a,compactText:n,compactCollapsed:i,tokens:o,collapsedTokens:r});if(1===s.length)return l.normalizedText.includes(s);let d=s.split(" ").filter(Boolean).filter(e=>e.length>=2);if(d.length>1&&d.every(e=>tY(e,l)))return!0;let c=tW(s);if(c.length>=2&&tY(c,l))return!0;let u=tJ(c);return!!(u&&u!==c&&tY(u,l))||(1===d.length?tY(d[0],l):d.some(e=>tY(e,l)))})(e,t)):[...e]}function tX(){if("store"===eD.view){"popular"===eD.storeFilter&&(r.textContent="Store"),"downloaded"===eD.storeFilter&&(r.textContent="Most Downloaded"),"top"===eD.storeFilter&&(r.textContent="Top Rated");return}if("library"===eD.view){r.textContent="Library";return}if("downloads"===eD.view){r.textContent="Downloads";return}let e=tP(eD.selectedGameId);r.textContent=e?.name||"Game"}function t1(){let e="store"===eD.view||"library"===eD.view,t=e&&(eD.searchOpen||eD.search.trim().length>0);i.classList.toggle("is-hidden",!e),i.classList.toggle("is-open",t),i.classList.toggle("is-collapsed",!t),l&&l.classList.toggle("is-active",t)}function t0(e=!0){eD.searchOpen=!1,e&&(eD.search="",n.value="",at(),ar()),t1()}function t2(e){if(!["store","details","library","downloads"].includes(e))return;"details"!==e?eD.lastNonDetailView=e:eD.searchOpen=!1,eD.view=e,eQ(!1),"library"!==e&&ao(),document.body.classList.toggle("view-details","details"===e),document.body.classList.toggle("view-downloads","downloads"===e),C.classList.toggle("is-active","store"===e),M.classList.toggle("is-active","details"===e),N.classList.toggle("is-active","library"===e),P.classList.toggle("is-active","downloads"===e);let t="details"===e?eD.lastNonDetailView:e;S.classList.toggle("is-active","store"===t),A.classList.toggle("is-active","library"===t),s.style.display="store"===e?"inline-flex":"none",t1(),tX()}function t4(e){if("number"==typeof e)return Number.isFinite(e)?e:NaN;let t=String(e||"").trim();if(!t)return NaN;let a=t.replace(/[^\d,.\-]/g,""),n=a.includes(","),i=a.includes(".");n&&i?a=a.lastIndexOf(",")>a.lastIndexOf(".")?a.replace(/\./g,"").replace(",","."):a.replace(/,/g,""):n&&(a=a.replace(",","."));let o=Number(a);return Number.isFinite(o)?o:NaN}function t8(e){return Number.isFinite(e)?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e):""}function t6(e){if("number"==typeof e)return Number.isFinite(e)&&e>0?t8(e):"";let t=String(e||"").trim();if(!t)return"";if(/[A-Za-z]/.test(t)||t.includes("R$"))return t;let a=t4(t);return Number.isFinite(a)&&a>0?t8(a):t}function t9(e){return e?"preparing"===e.phase?"Preparando":"downloading"===e.phase?"Baixando":"extracting"===e.phase?"Extraindo":"completed"===e.phase?"Pronto":"Processando":"Processando"}function t3(){let e=[];for(let[t,a]of eD.installProgressByGameId.entries()){if(!a||!["preparing","downloading","extracting"].includes(a.phase))continue;let n=tP(t);e.push({gameId:t,name:n?.name||"Jogo",progress:a})}return e.sort((e,t)=>String(e.name).localeCompare(String(t.name),"pt-BR",{sensitivity:"base"})),e}function t5(){let e=Date.now();for(let[t,a]of eD.recentCompletedDownloadsByGameId.entries()){let n=Number(a?.completedAt||0);if(!Number.isFinite(n)||n<=0||e-n>6e5){eD.recentCompletedDownloadsByGameId.delete(t);continue}let i=tP(t);i&&i.installed||eD.recentCompletedDownloadsByGameId.delete(t)}}function t7(e){e&&eD.recentCompletedDownloadsByGameId.delete(e)}function ae(){if(!P||!z||!R||!T)return;let e=t3(),t=function(){t5();let e=[];for(let[t,a]of eD.recentCompletedDownloadsByGameId.entries()){let n=tP(t);if(!n||!n.installed)continue;let i="close"===tF(n).action?"close":"play";e.push({gameId:t,completedAt:Number(a?.completedAt||0),game:n,action:i,actionLabel:"close"===i?"PARAR JOGO":"JOGAR"})}return e.sort((e,t)=>t.completedAt-e.completedAt),e}(),a=e.length>0,n=t.length>0,i=a||n;if(z.classList.toggle("is-hidden",!i),z.classList.toggle("is-collapsed",eD.downloadsSectionCollapsed),T.classList.toggle("is-hidden",i),O&&O.setAttribute("aria-label",eD.downloadsSectionCollapsed?"Expandir downloads ativos":"Recolher downloads ativos"),F&&(F.textContent=String(e.length)),!i){eD.downloadsSectionCollapsed=!1,R.innerHTML="";return}let o=e.map(({gameId:e,name:t,progress:a})=>{let n,i=tP(e),o=Number.isFinite(a?.totalBytes)&&a.totalBytes>0,r=Number.isFinite(a?.percent)?Math.max(0,Math.min(100,a.percent)):a?.phase==="extracting"?96:72*(a?.phase==="preparing"),s=`${Math.round(r)}%`,l=a?.phase==="preparing"||a?.phase==="extracting"||a?.phase==="downloading"&&!o,d=t9(a),c=String(a?.sourceLabel||"").trim(),u=a?.phase==="downloading"?!Number.isFinite(n=Number(function(e){let t=eD.downloadSpeedByGameId.get(e);if(!t)return 0;let a=Number(t.bps||0);return Number.isFinite(a)&&a>0?a:0}(e)))||n<=0?"0 bps":n<1024?`${Math.round(n)} B/s`:n<1048576?`${(n/1024).toFixed(1)} KB/s`:`${(n/1048576).toFixed(1)} MB/s`:"--",m=c?`${d} • ${c}`:d;return`
        <article class="downloads-item" data-open-game="${tb(e)}" aria-label="Download de ${tb(t)}">
          <div class="downloads-item-cover-wrap">
            <img class="downloads-item-cover" src="${tb(tM(i||{}))}" alt="Capa de ${tb(t)}" loading="lazy" />
          </div>

          <div class="downloads-item-content">
            <div class="downloads-item-top">
              <strong>${tb(t)}</strong>
              <div class="downloads-item-right">
                <span class="downloads-item-speed">${tb(u)}</span>
                <span class="downloads-item-percent">${tb(s)}</span>
              </div>
            </div>

            <span class="downloads-item-phase">${tb(m)}</span>

            <div class="downloads-item-progress ${l?"is-indeterminate":""}" aria-hidden="true">
              <div class="downloads-item-progress-fill" style="width: ${r}%"></div>
            </div>
          </div>
        </article>
      `}).join(""),r=t.map(({gameId:e,game:t,action:a,actionLabel:n})=>{let i=t?.name||"Jogo";return`
        <article class="downloads-item is-completed" data-open-game="${tb(e)}" aria-label="Instalacao concluida de ${tb(i)}">
          <div class="downloads-item-cover-wrap">
            <img class="downloads-item-cover" src="${tb(tM(t||{}))}" alt="Capa de ${tb(i)}" loading="lazy" />
          </div>

          <div class="downloads-item-content">
            <div class="downloads-item-top">
              <strong>${tb(i)}</strong>
              <div class="downloads-item-right">
                <span class="downloads-item-speed">Pronto</span>
                <span class="downloads-item-percent">100%</span>
              </div>
            </div>

            <span class="downloads-item-phase">Instalacao concluida</span>

            <div class="downloads-item-progress" aria-hidden="true">
              <div class="downloads-item-progress-fill" style="width: 100%"></div>
            </div>

            <div class="downloads-item-actions">
              <button
                type="button"
                class="downloads-item-action-btn"
                data-download-action="${tb(a)}"
                data-game-id="${tb(e)}"
              >
                ${tb(n)}
              </button>
            </div>
          </div>
        </article>
      `}).join(""),s=n?`
      <div class="downloads-subsection-title">Prontos para jogar</div>
      ${r}
    `:"";R.innerHTML=`${o}${s}`}function at(){let e,t=(e=tQ(eD.games),"downloaded"===eD.storeFilter&&(e=e.filter(e=>e.installed||tk(e.id))),"top"===eD.storeFilter&&e.sort((e,t)=>{let a=Number(!!e.installed)+Number(!!tk(e.id)),n=Number(!!t.installed)+Number(!!tk(t.id));return n!==a?n-a:String(e.name||"").localeCompare(String(t.name||""),"pt-BR",{sensitivity:"base"})}),e),a=`${eD.storeFilter}|${eD.search.trim().toLowerCase()}|${t.map(e=>e.id).join("|")}`,n=a!==eH;if(eH=a,0===t.length){G.innerHTML='<div class="library-empty">Nenhum jogo encontrado.</div>';return}let i="downloaded"===eD.storeFilter?"Mais baixados":"top"===eD.storeFilter?"Mais bem avaliados":"Descubra algo novo",o=t.map(e=>{let t,a=tz(e.id)?"is-busy":"",n=tG(e.id),i=n?.phase==="downloading"?"is-downloading":"",o=tz(e.id)?"state-busy":e.installed?"state-installed":e.comingSoon?"state-soon":"",r=String(e.storeType||e.productType||e.storeKind||e.cardKind||"").trim()||"Jogo base",s=(t=String(e.storeTag||e.badge||e.highlightTag||"").trim())||(!0===e.exclusive?"Exclusividades":""),l=Number.isFinite(n?.totalBytes)&&n.totalBytes>0,d=Number.isFinite(n?.percent)&&l?Math.max(0,Math.min(100,n.percent)):34,c=n?.phase!=="downloading"||l?"":"is-indeterminate",u=tz(e.id)?`
          <span class="store-card-progress-track ${c}" aria-hidden="true">
            <span class="store-card-progress-fill" style="width: ${d}%"></span>
          </span>
        `:"",m=tz(e.id)?`
          <span class="store-card-download-state">
            ${tb(l&&Number.isFinite(n?.percent)?`${t9(n)} ${Math.round(n.percent)}%`:`${t9(n)}...`)}
          </span>
        `:"";return`
        <button
          class="store-card ${a} ${i}"
          type="button"
          data-open-game="${tb(e.id)}"
          aria-label="Abrir ${tb(e.name)}"
        >
          <span class="store-card-poster">
            <img src="${tb(tM(e))}" alt="Capa de ${tb(e.name)}" loading="lazy" />
            <span class="store-card-state-dot ${o}" aria-hidden="true"></span>
            ${u}
          </span>
          <span class="store-card-meta" aria-hidden="true">
            <span class="store-card-kind">${tb(r)}</span>
            <span class="store-card-name">${tb(e.name)}</span>
            ${s?`
                  <span class="store-card-feature-badge">
                    <span class="store-card-feature-icon" aria-hidden="true">
                      <svg viewBox="0 0 24 24" fill="none">
                        <path d="M6 17.5H18L19.2 8.8L14.9 12.1L12 7.3L9.1 12.1L4.8 8.8L6 17.5Z" fill="currentColor"></path>
                      </svg>
                    </span>
                    ${tb(s)}
                  </span>
                `:""}
            ${function(e){let t=function(e){if(e.comingSoon)return{mode:"soon",current:"Em breve"};let t=!0===e.isFree||!0===e.free,a=t6(e.currentPrice||e.salePrice||e.price),n=t6(e.originalPrice||e.listPrice||e.basePrice),i=t4(e.discountPercent??e.discount??"");if(!Number.isFinite(i)||i<=0){let e=t4(a),t=t4(n);Number.isFinite(e)&&Number.isFinite(t)&&t>e&&(i=Math.round((t-e)/t*100))}return!t&&(a||n)?a&&n&&a!==n&&Number.isFinite(i)&&i>0?{mode:"discount",current:a,original:n,discount:`-${Math.round(i)}%`}:{mode:"price",current:a||n||""}:{mode:"free",current:""}}(e);if("discount"===t.mode)return`
      <span class="store-card-price-row">
        <span class="store-card-discount-badge">${tb(t.discount)}</span>
        <span class="store-card-original-price">${tb(t.original)}</span>
        <span class="store-card-current-price">${tb(t.current)}</span>
      </span>
    `;if("free"===t.mode)return"";let a="free"===t.mode?"store-card-price-row is-free":"store-card-price-row";return`
    <span class="${a}">
      <span class="store-card-current-price">${tb(t.current)}</span>
    </span>
  `}(e)}
            ${m}
          </span>
          <span class="visually-hidden">${tb(e.name)}</span>
        </button>
      `}).join("");G.innerHTML=`
    <section class="store-shelf" aria-label="${tb(i)}">
      <header class="store-shelf-head">
        <h2 class="store-shelf-title">
          ${tb(i)}
          <span class="store-shelf-title-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M9 6.8L14.2 12L9 17.2" stroke="currentColor" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </span>
        </h2>

        <div class="store-shelf-nav" aria-label="Navegar pela vitrine">
          <button class="store-shelf-nav-btn" type="button" data-store-scroll="-1" aria-label="Scroll para esquerda">
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M14.8 6.6L9.4 12L14.8 17.4" stroke="currentColor" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </button>
          <button class="store-shelf-nav-btn" type="button" data-store-scroll="1" aria-label="Scroll para direita">
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M9.2 6.6L14.6 12L9.2 17.4" stroke="currentColor" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </button>
        </div>
      </header>

      <div class="store-shelf-track-wrap">
        <div class="store-shelf-track" data-store-track>
          ${o}
        </div>
      </div>
    </section>
  `,eM&&n&&eM(G.querySelectorAll(".store-card"),{opacity:[0,1],y:[18,0]},{duration:.36,delay:eN?eN(.04):0,easing:[.22,1,.36,1]})}function aa(e){return tD(e.id)?"Removendo...":tz(e.id)?`${t9(tG(e.id))}...`:e.running?"Em execucao":e.installed?e.size&&"Tamanho nao informado"!==e.size?`Instalado • ${e.size}`:"Instalado":e.comingSoon?"Em breve":"Na biblioteca"}function an(e){return tD(e.id)?"Removendo":tz(e.id)?t9(tG(e.id)):e.running?"Fechar jogo":e.installed?"Jogar":"Abrir jogo"}function ai(){if(!D)return;let e=String(eD.openLibraryMenuGameId||"");D.querySelectorAll("[data-library-menu-toggle]").forEach(t=>{let a=String(t.getAttribute("data-library-menu-toggle")||""),n=e&&a===e;t.classList.toggle("is-open",!!n),t.setAttribute("aria-expanded",n?"true":"false")}),D.querySelectorAll("[data-library-menu]").forEach(t=>{let a=String(t.getAttribute("data-library-menu")||"");t.classList.toggle("is-open",!!(e&&a===e))})}function ao(){eD.openLibraryMenuGameId&&(eD.openLibraryMenuGameId="",ai())}function ar(){let e=function(){let e=new Set([...eD.libraryGameIds]),t=[];for(let a of e){let e=tP(a);e&&t.push(e)}let a=tQ(t);return a.sort((e,t)=>!!t.installed!=!!e.installed?Number(!!t.installed)-Number(!!e.installed):String(e.name||"").localeCompare(String(t.name||""),"pt-BR",{sensitivity:"base"})),a}(),t=new Set(e.map(e=>e.id));eD.openLibraryMenuGameId&&!t.has(eD.openLibraryMenuGameId)&&(eD.openLibraryMenuGameId="");let a=function(e){let t=eD.search.trim().toLowerCase();if(!Array.isArray(e)||0===e.length)return`${t}|empty`;let a=e.map(e=>[e.id,tM(e),tz(e.id)?"busy":"idle",tD(e.id)?"removing":"stable",an(e),aa(e)].join("~")).join("|");return`${t}|${a}`}(e);if(a===eV)return void ai();if(eV=a,0===e.length){D.classList.add("is-empty"),D.innerHTML=`
      <div class="library-empty-state">
        <div class="library-empty-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M4.8 8.5C4.8 7.2 5.8 6.2 7.1 6.2H16.9C18.2 6.2 19.2 7.2 19.2 8.5V17.1C19.2 18.4 18.2 19.4 16.9 19.4H7.1C5.8 19.4 4.8 18.4 4.8 17.1V8.5Z" stroke="currentColor" stroke-width="1.7"></path>
            <path d="M9.1 4.8H14.9" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"></path>
            <path d="M8.4 11.1H15.6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"></path>
            <path d="M8.4 14.2H13.1" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"></path>
          </svg>
        </div>
        <p class="library-empty-text">Sua biblioteca esta vazia. Clique em Add to Library ou Download Game.</p>
        <button class="library-empty-btn" type="button" data-go-store="true">Ir para Store</button>
      </div>
    `,ai();return}D.classList.remove("is-empty"),D.innerHTML=e.map(e=>{let t=eD.openLibraryMenuGameId===e.id,a=t?"is-open":"",n=e.installed||tD(e.id),i=!e.installed||tz(e.id)?"disabled":"",o=!e.installed||tD(e.id)?"disabled":"";return`
        <article class="library-card">
          <button class="library-card-open" type="button" data-open-game="${tb(e.id)}" aria-label="Abrir ${tb(e.name)}">
            <div class="library-card-thumb">
              <img src="${tb(tM(e))}" alt="Capa de ${tb(e.name)}" loading="lazy" />
            </div>
          </button>
          <div class="library-card-body">
            <div class="library-card-head">
              <button class="library-card-title-btn" type="button" data-open-game="${tb(e.id)}">
                <strong>${tb(e.name)}</strong>
              </button>
              ${n?`
                    <div class="library-card-menu-wrap">
                      <button
                        class="library-card-menu-btn ${a}"
                        type="button"
                        data-library-menu-toggle="${tb(e.id)}"
                        aria-haspopup="menu"
                        aria-expanded="${t?"true":"false"}"
                        aria-label="Opcoes de ${tb(e.name)}"
                      >
                        <span aria-hidden="true">...</span>
                      </button>
                      <div class="library-card-menu ${a}" data-library-menu="${tb(e.id)}" role="menu">
                        <button
                          class="library-card-menu-item"
                          type="button"
                          role="menuitem"
                          data-library-menu-action="open-folder"
                          data-game-id="${tb(e.id)}"
                          ${o}
                        >
                          ABRIR NA PASTA
                        </button>
                        <button
                          class="library-card-menu-item is-danger"
                          type="button"
                          role="menuitem"
                          data-library-menu-action="uninstall"
                          data-game-id="${tb(e.id)}"
                          ${i}
                        >
                          DESINSTALAR
                        </button>
                      </div>
                    </div>
                  `:""}
            </div>
            <span class="library-card-action">${tb(an(e))}</span>
            <span class="library-card-subtitle">${tb(aa(e))}</span>
          </div>
        </article>
      `}).join(""),ai()}function as(){let e=eD.games.filter(e=>e.installed);if(0===e.length){E.innerHTML="";return}E.innerHTML=e.map(e=>{let t=e.id===eD.selectedGameId&&"details"===eD.view?"is-selected":"";return`
        <button
          class="rail-game-btn ${t}"
          type="button"
          data-open-game="${tb(e.id)}"
          style="background-image: url('${tv(tM(e))}');"
          aria-label="Abrir ${tb(e.name)}"
        ></button>
      `}).join("")}function al(e){if(!ei)return;let t=tR(e),a=Number(eD.selectedGalleryByGameId.get(e.id)),n=Number.isFinite(a)?a:-1;if(n>=0&&n<t.length){let a=t[n];tq(`gallery:${e.id}:${n}:${a}`,`
      <div class="video-fallback media-preview-image-wrap">
        <img class="media-preview-image" src="${tb(a)}" alt="Preview ${n+1} de ${tb(e.name)}" />
      </div>
    `);return}let i=String(e.trailerUrl||e.videoUrl||"").trim();if(!i)return void tq(`fallback:${e.id}:${tN(e)}`,`
      <div class="video-fallback">
        <img src="${tb(tN(e))}" alt="Preview de ${tb(e.name)}" />
      </div>
    `);let o=function(e){let t=tT(e);if(!t?.videoId)return"";let a=new URLSearchParams;return a.set("rel","0"),a.set("playsinline","1"),a.set("modestbranding","1"),a.set("controls","1"),a.set("iv_load_policy","3"),a.set("fs","1"),t.list&&a.set("list",t.list),t.startSeconds>0&&a.set("start",String(t.startSeconds)),`https://www.youtube.com/embed/${t.videoId}?${a.toString()}`}(i);if(o){let t=function(e){let t=tT(e);if(!t?.videoId)return"";let a=new URLSearchParams;return a.set("v",t.videoId),t.list&&a.set("list",t.list),t.startSeconds>0&&a.set("t",String(t.startSeconds)),`https://www.youtube.com/watch?${a.toString()}`}(i),a=o?`${o}${o.includes("?")?"&":"?"}autoplay=0&hl=pt-BR`:"",n=t?`
          <div class="video-actions-floating">
            <button class="video-open-youtube-btn" type="button" data-open-youtube-url="${tb(t)}">
              YouTube
            </button>
          </div>
        `:"";tq(`youtube:${e.id}:${o}`,`
      <div class="video-embed-shell video-youtube-shell">
        ${a?`
              <webview
                class="video-youtube-webview"
                src="${tb(a)}"
                partition="persist:wplay-youtube"
                allowfullscreen
              ></webview>
            `:`
              <iframe
                src="${tb(o)}"
                title="Trailer de ${tb(e.name)}"
                loading="lazy"
                referrerpolicy="strict-origin-when-cross-origin"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen
              ></iframe>
            `}
        ${n}
      </div>
    `);return}let r=function(e){let t=String(e||"").trim();if(!t)return{isDirect:!1,mimeType:""};let a=tj(t);if(a)return{isDirect:!0,mimeType:tH(a)};let n=t.toLowerCase();if(n.includes("response-content-type=video%2f")||n.includes("response-content-type=video/")){let e=n.match(/response-content-type=([^&#]+)/i),t=tU(e?.[1]||"").toLowerCase();return{isDirect:!0,mimeType:t.startsWith("video/")?t:""}}if(n.includes("content-type=video%2f")||n.includes("content-type=video/")){let e=n.match(/content-type=([^&#]+)/i),t=tU(e?.[1]||"").toLowerCase();return{isDirect:!0,mimeType:t.startsWith("video/")?t:""}}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//i.test(t)?t:`https://${t.replace(/^\/+/,"")}`;try{let e=new URL(i),t=tj(e.pathname);if(t)return{isDirect:!0,mimeType:tH(t)};let a=[];for(let[t,n]of e.searchParams.entries()){let e=String(t||"").toLowerCase();["filename","file","name","download","attachment","response-content-disposition","response-content-type","content-type"].includes(e)&&a.push(n)}for(let e of a){let t=tU(e).toLowerCase();if(t.startsWith("video/"))return{isDirect:!0,mimeType:t};let a=tj(e);if(a)return{isDirect:!0,mimeType:tH(a)}}let n=tj(e.hash);if(n)return{isDirect:!0,mimeType:tH(n)}}catch(e){}return{isDirect:!1,mimeType:""}}(i);if(r.isDirect){let t=r.mimeType?` type="${tb(r.mimeType)}"`:"";tq(`video:${e.id}:${i}`,`
      <video controls playsinline preload="metadata" poster="${tb(tN(e))}">
        <source src="${tb(i)}"${t} />
      </video>
    `);return}tq(`iframe:${e.id}:${i}`,`
    <iframe
      src="${tb(i)}"
      title="Video de ${tb(e.name)}"
      loading="lazy"
      allowfullscreen
    ></iframe>
  `)}function ad(e){let t=tR(e),a=tV(e);if(!t.length&&!a){eo.innerHTML="",eD.selectedGalleryByGameId.set(e.id,-1);return}let n=Number(eD.selectedGalleryByGameId.get(e.id)),i=-1;Number.isFinite(n)&&(n>=0&&n<t.length?i=n:-1===n&&(i=-1)),!a&&i<0&&t.length>0&&(i=0),eD.selectedGalleryByGameId.set(e.id,i);let o=[];if(a){let t=i<0?"is-active":"";o.push(`
      <button class="gallery-thumb gallery-thumb-video ${t}" type="button" data-gallery-index="-1" aria-label="Exibir trailer de ${tb(e.name)}">
        <img src="${tb(tN(e))}" alt="Trailer de ${tb(e.name)}" loading="lazy" />
        <span class="gallery-video-badge" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M9 7.6V16.4L16 12L9 7.6Z" fill="currentColor"></path>
          </svg>
          VIDEO
        </span>
      </button>
    `)}o.push(...t.map((t,a)=>{let n=a===i?"is-active":"";return`
        <button class="gallery-thumb ${n}" type="button" data-gallery-index="${a}" aria-label="Exibir imagem ${a+1} de ${tb(e.name)}">
          <img src="${tb(t)}" alt="Imagem ${a+1} de ${tb(e.name)}" loading="lazy" />
        </button>
      `})),eo.innerHTML=o.join("")}function ac(e){let t,a,n,i,o,r,s,l=e.longDescription||e.description||"Sem descricao.";q.textContent=e.name||"Game",W.textContent=e.name||"Game",K.textContent=e.description||"Sem descricao.",Z.textContent=l,_.style.backgroundImage=`url('${tv(tN(e))}')`,ea.textContent=function(e){let t=t$(e,["userPlayTimeHours","averagePlayTime","avgPlayTime","playTime","avgPlayTimeHours","playTimeHours"]);if("number"==typeof t)return tI(t);let a=String(t||"").trim();if(!a)return"--";let n=Number(a.replace(",","."));return Number.isFinite(n)&&n>0?tI(n):a}(e),en.textContent=function(e){let t=t$(e,["userAchievementPercent","averageAchievement","avgAchievement","achievementRate","avgAchievementPercent","achievementPercent","completionRate"]);if("number"==typeof t){let e=Math.max(0,Math.min(100,t<=1?100*t:t));return`${Math.round(e)}%`}let a=String(t||"").trim();if(!a)return"--";if(a.includes("%"))return a;let n=Number(a.replace(",","."));if(Number.isFinite(n)){let e=Math.max(0,Math.min(100,n<=1?100*n:n));return`${Math.round(e)}%`}return a}(e);let d=e.logoUrl||"";d?(J.src=d,J.alt=`Logo do jogo ${e.name}`,J.classList.remove("is-hidden")):(J.classList.add("is-hidden"),J.removeAttribute("src")),er.textContent=e.developedBy||"Nao informado",es.textContent=e.publishedBy||"Nao informado",el.textContent=e.releaseDate||"Nao informado",ed.innerHTML=(Array.isArray(e.genres)&&e.genres.length>0?e.genres.filter(Boolean).map(e=>String(e)):"string"==typeof e.genre&&e.genre.trim()?[e.genre.trim()]:"string"==typeof e.section&&e.section.trim()?[e.section.trim()]:["Action","Adventure"]).map(e=>`<span class="genre-tag">${tb(e)}</span>`).join(""),ad(e),al(e),function(e){let t=tG(e.id);if(!t||!tz(e.id)){X.classList.add("is-hidden"),X.classList.remove("is-indeterminate"),ee.style.width="0%",et.textContent="";return}let a=Number.isFinite(t.totalBytes)&&t.totalBytes>0,n=Number.isFinite(t.percent)?Math.max(0,Math.min(100,t.percent)):"extracting"===t.phase?96:"preparing"===t.phase?72:34,i="preparing"===t.phase||"extracting"===t.phase||"downloading"===t.phase&&!a;X.classList.remove("is-hidden"),X.classList.toggle("is-indeterminate",i),ee.style.width=`${n}%`,et.textContent=function(e){if(!e)return"";if("downloading"===e.phase&&e.totalBytes>0){let t=(e.downloadedBytes/1024/1024).toFixed(1),a=(e.totalBytes/1024/1024).toFixed(1);return`${e.message} (${t} MB / ${a} MB)`}return e.message||""}(t)}(e),e.installed&&!tk(e.id)&&tx(e.id),t=tF(e),Q.dataset.gameId=e.id,Q.dataset.action=t.action,tw(Q,t.label),function(e){let t;if(!Q)return;let a=(t=String(eE[String(String(e||"").trim().toLowerCase()||"").trim().toLowerCase()]||"").trim())&&/^https?:\/\//i.test(t)?t:"";Q.removeAttribute("data-custom-icon"),Q.style.removeProperty("--details-action-icon-url"),a&&(Q.setAttribute("data-custom-icon","true"),Q.style.setProperty("--details-action-icon-url",`url('${tv(a)}')`))}(t.action),Q.disabled=t.disabled,a=tk(e.id),n=!e.installed&&!tD(e.id),i=!tz(e.id)&&!tD(e.id),Y.dataset.gameId=e.id,Y.classList.toggle("is-active",a),Y.classList.toggle("is-hidden",!n),tw(Y,a?"Remove from Library":"Add to Library"),Y.disabled=!n||!i,r=(o=e.installed&&!tz(e.id)&&!tD(e.id))?e.running?"close":"play":"",eu.classList.toggle("is-hidden",!o),eu.dataset.gameId=o?e.id:"",eu.dataset.action=r,eu.textContent="close"===r?"PARAR JOGO":"PLAY GAME",s=e.installed||tD(e.id),em.classList.toggle("is-hidden",!s),em.disabled=tz(e.id),em.dataset.gameId=s?e.id:"",em.textContent=tD(e.id)?"REMOVENDO...":"DESINSTALAR",ec.textContent=tD(e.id)?"Removendo":tz(e.id)?t9(tG(e.id)):e.running?"Em execucao":e.installed?e.size&&"Tamanho nao informado"!==e.size?`Instalado • ${e.size}`:"Instalado":e.comingSoon?"Em breve":tk(e.id)?"Na biblioteca":"Nao instalado"}function au(){if(at(),ar(),ae(),as(),!function(){if(!k||!x)return;let e=t3(),t=e.length>0;k.classList.remove("is-hidden"),k.classList.toggle("is-busy",t),k.classList.toggle("is-active","downloads"===eD.view),k.setAttribute("aria-expanded","downloads"===eD.view?"true":"false"),x.classList.toggle("is-hidden",!t),x.textContent=String(Math.min(e.length,99))}(),tX(),!eD.selectedGameId)return;let e=tP(eD.selectedGameId);if(!e){eD.selectedGameId="","details"===eD.view&&t2(eD.lastNonDetailView||"store");return}ac(e)}function am(e){let t=tP(e);t&&(eD.selectedGameId=e,"details"!==eD.view&&(eD.lastNonDetailView=eD.view),eD.selectedGalleryByGameId.has(e)||eD.selectedGalleryByGameId.set(e,-1),t2("details"),ac(t),as())}function ap(){t2(eD.lastNonDetailView||"store")}async function ag(){return ez||(ez=(async()=>{let e=new Map(eD.games.map(e=>[e.id,!!e.installed])),t=eD.selectedGameId;eD.games=await window.launcherApi.getGames();let a=!1;for(let e of eD.games)e.installed&&!eD.libraryGameIds.has(e.id)&&(eD.libraryGameIds.add(e.id),a=!0);if(a&&tE(),t5(),au(),!t)return;let n=e.get(t),i=tP(t);i&&(!0!==n||!1!==i.installed||tz(t)||tD(t)||e_(`${i.name} nao foi encontrado no disco. Clique em Download Game para instalar novamente.`))})().catch(e=>{throw e}).finally(()=>{ez=null}))}async function af(){try{eD.installRootPath=await window.launcherApi.getInstallRoot()}catch(e){eD.installRootPath="C:\\wyzer_games"}}function ay(e,t=!1){if(!eP||!e)return;let a=e.getBoundingClientRect();eP({particleCount:t?120:70,spread:70,startVelocity:42,gravity:1,ticks:220,origin:{x:(a.left+a.width/2)/window.innerWidth,y:Math.max(0,(a.top+.2*a.height)/window.innerHeight)},colors:["#ffffff","#d4e8ff","#a5c7ff","#e8f0ff"],scalar:t?1:.9})}async function ah(e,t){if(!eD.authSession?.user?.id){eW(!0),eK("Entre com Steam para continuar."),e_("Login necessario para continuar.");return}if(!e||["busy","soon"].includes(t))return;let a=tP(e);if(a)try{if("play"===t){try{let t=await window.launcherApi.playGame(e);if(await ag(),t?.alreadyRunning){e_(`${a.name} ja esta em execucao.`),to("info","Jogo em execucao",`${a.name} ja estava aberto.`);return}e_(`Jogo iniciado: ${a.name}.`),to("success","Jogo iniciado",`${a.name} foi aberto com sucesso.`)}catch(n){await ag();let t=tP(e);if(!t?.installed){e_(`${a.name} nao foi encontrado. Clique em Download Game para instalar novamente.`),to("error","Arquivo nao encontrado",`${a.name} nao foi encontrado no disco.`);return}throw n}return}if("close"===t){if("function"!=typeof window.launcherApi.closeGame)throw Error("Fechar jogo nao esta disponivel nesta versao do launcher.");let t=await window.launcherApi.closeGame(e);if(await ag(),t?.alreadyStopped){e_(`${a.name} ja estava fechado.`),to("info","Jogo ja fechado",`${a.name} nao estava em execucao.`);return}e_(`Jogo fechado: ${a.name}.`),to("success","Jogo fechado",`${a.name} foi encerrado com sucesso.`);return}if("open-folder"===t){if("function"!=typeof window.launcherApi.openGameInstallFolder)throw Error("Este atalho nao esta disponivel nesta versao do launcher.");let t=await window.launcherApi.openGameInstallFolder(e);e_(`Pasta do jogo aberta: ${tB(t||a.installDir||a.name)}.`),to("info","Pasta aberta",`Abrindo arquivos instalados de ${a.name}.`);return}if("install"===t){let t=await tA();if("cancel"===t){e_("Instalacao cancelada."),to("info","Instalacao cancelada","A instalacao foi cancelada antes do download.");return}if("change"===t){let e=await window.launcherApi.chooseInstallBaseDirectory();if(e?.canceled){e_("Instalacao cancelada."),to("info","Instalacao cancelada","Nenhum diretorio foi selecionado.");return}eD.installRootPath=e?.installRoot||eD.installRootPath,await ag()}tx(e),au(),e_(`Iniciando download de ${a.name} em ${tB(tL())}...`),to("info","Download iniciado",`${a.name} esta sendo baixado.`),t2("downloads"),eD.searchOpen=!1,t1(),au(),await window.launcherApi.installGame(e),await ag();return}if("uninstall"===t){if(!window.confirm(`Desinstalar ${a.name}?

Isso remove os arquivos do computador.`))return;eD.uninstallingGameIds.add(e),au(),e_(`Removendo ${a.name}...`),to("info","Desinstalando",`Removendo ${a.name} do computador.`);try{await window.launcherApi.uninstallGame(e),tC(e),t7(e),await ag(),e_(`${a.name} removido do computador e da biblioteca.`),to("success","Jogo removido",`${a.name} foi removido com sucesso.`)}finally{eD.uninstallingGameIds.delete(e),au()}}}catch(a){e_(`Erro: ${a.message}`,!0),("install"!==t||tG(e)?.phase!=="failed")&&to("error","Operacao falhou",a.message||"Erro inesperado.")}}async function aw(){await e0()}!function(){if(!I||!L)return;let e=e=>{I.classList.toggle("has-logo",!!e)},t=()=>{"1"===L.dataset.fallbackApplied?e(!1):(L.dataset.fallbackApplied="1",L.src="./assets/logo-default.svg")};L.addEventListener("load",()=>{e(!0)}),L.addEventListener("error",()=>{t()}),L.complete&&(L.naturalWidth>0?e(!0):t())}(),te(!1),e7(),eZ(),tc(),tm(),function(){if(!eD.autoUpdateRealtimeSyncStarted){if(eD.autoUpdateRealtimeSyncStarted=!0,!ts())return tc();window.setInterval(()=>{(async()=>{try{let e=await window.launcherApi.autoUpdateGetState();tu(e,!1)}catch(e){}})()},15e3),window.setInterval(()=>{tp()},6e4),window.addEventListener("focus",()=>{tl()}),document.addEventListener("visibilitychange",()=>{document.hidden||tl()})}}(),tl(2500),eL&&eL.addEventListener("click",()=>{e2()}),eS&&eS.addEventListener("click",()=>{e0()}),n.addEventListener("input",()=>{eD.search=n.value||"",eD.search.trim()&&(eD.searchOpen=!0),t1(),at(),ar()}),l&&l.addEventListener("click",()=>{("details"===eD.view&&(t2(eD.lastNonDetailView||"store"),au()),eD.searchOpen)?t0(!0):(eD.searchOpen=!0,t1(),n.focus())}),m&&m.addEventListener("click",e=>{if(e.preventDefault(),e.stopPropagation(),!eD.authSession?.user?.id){eW(!0),eK("Entre com Steam para continuar.");return}eD.notificationsOpen&&ti(!1),eY(),eQ(!eD.accountMenuOpen)}),p&&(p.addEventListener("click",e=>{e.stopPropagation()}),p.addEventListener("click",async e=>{let t=e.target.closest("[data-account-action]");if(!t)return;e.preventDefault();let a=t.dataset.accountAction||"";eQ(!1);try{await e8(a)}catch(e){e_(`Erro no menu da conta: ${e?.message||"erro desconhecido"}`,!0),to("error","Conta",e?.message||"Falha ao executar acao da conta.")}})),v&&v.addEventListener("click",async()=>{try{await window.launcherApi.minimizeWindow()}catch(e){}}),B&&B.addEventListener("click",async()=>{try{let e=await window.launcherApi.toggleMaximizeWindow();te(!!e)}catch(e){}}),$&&$.addEventListener("click",async()=>{try{await window.launcherApi.closeWindow()}catch(e){}}),d&&d.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();let t=!eD.notificationsOpen;ti(t),t&&e_("Notificacoes recentes abertas.")}),u&&u.addEventListener("click",async e=>{e.preventDefault(),e.stopPropagation(),eD.notificationsOpen&&ti(!1),eD.accountMenuOpen&&eQ(!1),await th()}),y&&y.addEventListener("click",e=>{e.stopPropagation()}),b&&b.addEventListener("click",e=>{e.preventDefault(),eD.notificationHistory=[],tn(),e3(),e_("Historico de notificacoes limpo.")}),h&&h.addEventListener("click",e=>{let t,a=e.target.closest("[data-notification-dismiss]");a&&(e.preventDefault(),e.stopPropagation(),(t=String(a.getAttribute("data-notification-dismiss")||"").trim())&&(eD.notificationHistory=(eD.notificationHistory||[]).filter(e=>e.id!==t),tn(),e9()))}),k&&k.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),t2("downloads"),eD.searchOpen=!1,t1(),au(),e_("Abrindo downloads...")}),document.addEventListener("click",e=>{let t=e.target;if(!(t instanceof Element)){eD.searchOpen&&t0(!0),eD.notificationsOpen&&ti(!1),eD.openLibraryMenuGameId&&ao(),eD.accountMenuOpen&&eQ(!1);return}if(eD.searchOpen&&!(i&&i.contains(t))&&t0(!0),eD.notificationsOpen){if(d&&d.contains(t)||y&&y.contains(t))return;ti(!1)}if(eD.openLibraryMenuGameId&&!t.closest(".library-card-menu-wrap")&&ao(),eD.accountMenuOpen){if(m&&m.contains(t)||p&&p.contains(t))return;eQ(!1)}}),s.addEventListener("click",e=>{let t=e.target.closest("[data-filter]");t&&(eD.storeFilter=t.dataset.filter||"popular",s.querySelectorAll("[data-filter]").forEach(e=>{e.classList.toggle("is-active",e===t)}),tX(),at())}),S.addEventListener("click",()=>{t2("store"),eD.searchOpen=!1,t1(),au()}),I&&I.addEventListener("click",()=>{t2("store"),eD.searchOpen=!1,t1(),eD.notificationsOpen&&ti(!1),au(),e_("Abrindo Store...")}),A.addEventListener("click",()=>{t2("library"),eD.searchOpen=!1,t1(),au()}),U&&U.addEventListener("click",async()=>{let e=await tA();if("cancel"===e||"keep"===e)return void e_("Configuracao de instalacao mantida.");let t=await window.launcherApi.chooseInstallBaseDirectory();t?.canceled?e_("Alteracao de pasta cancelada."):(eD.installRootPath=t?.installRoot||eD.installRootPath,await ag(),e_(`Pasta de instalacao atualizada para ${tB(tL())}.`),to("success","Instalacao","Pasta padrao de instalacao atualizada."))}),O&&O.addEventListener("click",()=>{eD.downloadsSectionCollapsed=!eD.downloadsSectionCollapsed,ae()}),j&&j.addEventListener("click",()=>{to("info","Downloads","Pausar todos sera disponibilizado em breve.")}),H&&H.addEventListener("click",()=>{to("info","Downloads","Retomar todos sera disponibilizado em breve.")}),G.addEventListener("click",e=>{let t=e.target.closest("[data-store-scroll]");if(t){let e=Number(t.dataset.storeScroll||0);if(!Number.isFinite(e)||0===e)return;let a=G.querySelector("[data-store-track]");if(!a)return;a.scrollBy({left:560*e,behavior:"smooth"});return}let a=e.target.closest("[data-open-game]");a&&am(a.dataset.openGame)}),E.addEventListener("click",e=>{let t=e.target.closest("[data-open-game]");t&&am(t.dataset.openGame)}),D.addEventListener("click",async e=>{if(e.target.closest("[data-go-store]")){t2("store"),eD.searchOpen=!1,t1(),au(),e_("Abrindo Store...");return}let t=e.target.closest("[data-library-menu-toggle]");if(t){let a;e.preventDefault(),e.stopPropagation(),(a=String(t.dataset.libraryMenuToggle||""))?(eD.openLibraryMenuGameId=eD.openLibraryMenuGameId===a?"":a,ai()):ao();return}let a=e.target.closest("[data-library-menu-action]");if(a){e.preventDefault(),e.stopPropagation();let t=a.dataset.gameId||"",n=a.dataset.libraryMenuAction||"";ao(),"uninstall"===n?await ah(t,"uninstall"):"open-folder"===n&&await ah(t,"open-folder");return}let n=e.target.closest("[data-open-game]");n&&(ao(),am(n.dataset.openGame))}),R&&R.addEventListener("click",async e=>{let t=e.target.closest("[data-download-action]");if(t){e.preventDefault(),e.stopPropagation();let a=t.dataset.gameId||"",n=t.dataset.downloadAction||"play";if(!a)return;await ah(a,n);return}let a=e.target.closest("[data-open-game]");a&&am(a.dataset.openGame)}),V.addEventListener("click",ap),eo.addEventListener("click",e=>{let t=e.target.closest("[data-gallery-index]");if(!t)return;let a=Number(t.dataset.galleryIndex);if(!Number.isFinite(a))return;let n=tP(eD.selectedGameId);if(!n)return;let i=tR(n),o=tV(n),r=-1;if(a<0){if(!o)return;r=-1}else{if(!i.length)return;r=Math.min(Math.max(0,a),i.length-1)}eD.selectedGalleryByGameId.set(n.id,r),al(n),ad(n)}),ei&&ei.addEventListener("click",async e=>{let t=e.target.closest("[data-open-youtube-url]");if(!t)return;e.preventDefault(),e.stopPropagation();let a=String(t.dataset.openYoutubeUrl||"").trim();if(a)try{await e6(a),e_("Abrindo trailer no YouTube...")}catch(t){let e=t?.message||"Nao foi possivel abrir o video no navegador.";e_(e,!0),to("error","Video",e)}}),Y.addEventListener("click",()=>{let e=Y.dataset.gameId||"";if(!e)return;let t=tP(e);if(t){if(tk(e)){tC(e),au(),e_(`Jogo removido da biblioteca: ${t.name}.`),to("info","Biblioteca",`${t.name} foi removido da biblioteca.`);return}tx(e),au(),e_(`Jogo adicionado a biblioteca: ${t.name}.`),to("success","Biblioteca",`${t.name} foi adicionado a biblioteca.`)}}),Q.addEventListener("click",async()=>{let e=Q.dataset.gameId||"",t=Q.dataset.action||"";("install"===t||"play"===t)&&ay(Q,"play"===t),await ah(e,t)}),eu.addEventListener("click",async()=>{let e=eu.dataset.gameId||"",t=eu.dataset.action||"play";e&&await ah(e,t)}),em.addEventListener("click",async()=>{let e=em.dataset.gameId||"";e&&await ah(e,"uninstall")}),ep.addEventListener("click",e=>{e.target.closest("[data-close-install-path='true']")&&tS("cancel")}),ef.addEventListener("click",()=>{tS("keep")}),ey.addEventListener("click",()=>{tS("change")}),eh.addEventListener("click",()=>{tS("cancel")}),ew&&ew.addEventListener("click",e=>{e.target.closest("[data-close-update-restart='true']")&&td(!1)}),eB&&eB.addEventListener("click",()=>{td(!1)}),ev&&ev.addEventListener("click",async()=>{td(!1),await ty()}),window.addEventListener("keydown",e=>{"Escape"===e.key&&eD.updateRestartModalOpen?td(!1):"Escape"!==e.key||ep.classList.contains("is-hidden")?"Escape"===e.key&&eD.accountMenuOpen?eQ(!1):"Escape"===e.key&&eD.openLibraryMenuGameId?ao():"Escape"===e.key&&eD.notificationsOpen?ti(!1):"Escape"===e.key&&"details"===eD.view&&ap():tS("cancel")}),window.launcherApi.onInstallProgress(async e=>{if(eD.installProgressByGameId.set(e.gameId,e),["preparing","downloading","extracting"].includes(e.phase)&&t7(e.gameId),"downloading"===e.phase){let t=Number(e.speedBps);if(Number.isFinite(t)&&t>=0)eD.downloadSpeedByGameId.set(e.gameId,{lastBytes:Number(e.downloadedBytes)||0,lastAt:Date.now(),bps:t});else{let t=Number(e.downloadedBytes);if(Number.isFinite(t)&&t>=0){let a=Date.now(),n=eD.downloadSpeedByGameId.get(e.gameId);if(n&&Number.isFinite(n.lastBytes)&&a>n.lastAt){let i=Math.max(0,t-n.lastBytes),o=(a-n.lastAt)/1e3,r=o>0?i/o:0,s=n.bps>0?.65*n.bps+.35*r:r;eD.downloadSpeedByGameId.set(e.gameId,{lastBytes:t,lastAt:a,bps:s})}else eD.downloadSpeedByGameId.set(e.gameId,{lastBytes:t,lastAt:a,bps:0})}}}else["preparing","extracting"].includes(e.phase)||eD.downloadSpeedByGameId.delete(e.gameId);if(["preparing","downloading","extracting"].includes(e.phase)?!function(){let e=()=>{eU=0,eO&&(window.clearTimeout(eO),eO=null),ej=Date.now(),au()},t=Date.now()-ej;if(t>=120){eU||(eU=window.requestAnimationFrame(e));return}if(eO)return;let a=Math.max(16,120-t);eO=window.setTimeout(()=>{eO=null,eU||(eU=window.requestAnimationFrame(e))},a)}():au(),["preparing","downloading","extracting"].includes(e.phase)&&e_(e.message||"Processando download..."),"failed"===e.phase){t7(e.gameId),e_(e.message||"Falha na instalacao.",!0),to("error","Falha na instalacao",e.message||"O download nao foi concluido."),setTimeout(()=>{eD.installProgressByGameId.delete(e.gameId),eD.downloadSpeedByGameId.delete(e.gameId),au()},12e3);return}if("completed"===e.phase){var t;(t=e.gameId)&&(eD.recentCompletedDownloadsByGameId.set(t,{completedAt:Date.now()}),t5()),tx(e.gameId),await ag(),ay(A,!0),e_("Download finalizado. O jogo foi para Sua biblioteca.");let a=tP(e.gameId);to("success","Jogo instalado",a?`${a.name} foi instalado com sucesso.`:"Jogo instalado com sucesso."),setTimeout(()=>{eD.installProgressByGameId.delete(e.gameId),eD.downloadSpeedByGameId.delete(e.gameId),au()},1200)}}),"function"==typeof window.launcherApi.onWindowMaximized&&window.launcherApi.onWindowMaximized(e=>{te(e)}),"function"==typeof window.launcherApi.isWindowMaximized&&window.launcherApi.isWindowMaximized().then(e=>{te(e)}).catch(()=>{te(!1)}),aw()}]);